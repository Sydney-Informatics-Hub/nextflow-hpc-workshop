// NCI Gadi nf-core configuration profile
params {
    config_profile_description = 'NCI Gadi HPC profile provided by nf-core/configs'
    config_profile_contact = 'Georgie Samaha (@georgiesamaha), Matthew Downton (@mattdton)'
    config_profile_url = 'https://opus.nci.org.au/display/Help/Gadi+User+Guide'
}

// Enable use of Singularity to run containers
singularity {
    enabled = true
    autoMounts = true
}

// Define process resource limits
process {
    executor = 'pbspro'
    storage = "scratch/er01"
    module = 'singularity'
    cache = 'lenient'
    stageInMode = 'symlink'
    project = System.getenv("PROJECT")
    queue = 'copyq' // { task.memory < 128.GB ? 'normalbw' : (task.memory >= 128.GB && task.memory <= 190.GB ? 'normal' : (task.memory > 190.GB && task.memory <= 1020.GB ? 'hugemembw' : '')) }
    beforeScript = 'module load singularity'
}
